<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>EDDSlideshow</title>

    <!-- browser setup -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">

    <!-- page meta information -->
    <meta name="description" content="Example-Driven Development is superficially like Test-Driven Development, where you drive development by constructing tests methods that return example objects.">
    <meta property="og:type" content="article">
    <meta property="og:site_name" content="gtoolkit book">
    <meta property="og:title" content="EDDSlideshow">
    <meta property="og:url" content="https://book.gtoolkit.com/index.html">
    <meta property="og:description" content="Example-Driven Development is superficially like Test-Driven Development, where you drive development by constructing tests methods that return example objects.">

    <!-- CSS styles -->
    <link rel="stylesheet" href="assets/vendor/awesomefonts/css/all.css">
    <link rel="stylesheet" href="assets/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/v1/src/css/lepiter-common.css">
    <link rel="stylesheet" href="assets/v1/src/css/lepiter-snippets.css">
    <link rel="stylesheet" href="assets/v1/src/css/vs.css">
</head>
<body>

    <div class="content">
        <div class="container min-height py-5 le-main-container">
            <main>
                <h1 class="le-main-title">EDDSlideshow</h1>

                <!-- page content start -->

                <div class="snippet textual-snippet text-snippet paragraphWidth">  <h2> Example-Driven Development  </h2></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Example-Driven Development is superficially like Test-Driven Development, where you drive development by constructing tests methods that return example objects.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>It sounds simple, but it actually changes the development process in several fundamental ways.  </p></div><figure class="snippet picture-snippet fullWidth"><img class="picture-snippet-image" src="gt-figures/1000.png"/></figure><div class="snippet textual-snippet text-snippet paragraphWidth"></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <h2> The Trouble with TDD  </h2></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>With TDD, you develop code by incrementally adding a test for a new feature, which fails.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Then you write the “simplest code” that passes the new test.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>You add new tests, refactoring as needed, until you have fully covered everything that the new feature should fulfil, as specified by the tests. <b>But:</b>     <i>Where do tests come from?    </i>  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>When you write a test, you actually have to “guess first” to imagine what objects to create, exercise and test.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>    <i>How do we write the simplest code that passes?    </i>  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>A test that fails gives you a debugger context, but then you have to go somewhere else to add some new classes and methods.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>    <i>What use is a green test?    </i>  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Green tests can be used to detect regressions, but otherwise they don't help you much to create new tests or explore the running system.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>    <i>With Example-Driven Development we try to answer these questions.    </i>  </p></div><figure class="snippet picture-snippet fullWidth"><img class="picture-snippet-image" src="gt-figures/1001.png"/></figure><div class="snippet textual-snippet text-snippet paragraphWidth"></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <h2> What's an Example?  </h2></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>An example method is just a test method that happens to return the object being tested.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Through this simple change, instead of a passing test simply being green, we get back an object that we can inspect, explore, and reuse for various purposes.  </p></div><figure class="snippet picture-snippet fullWidth"><img class="picture-snippet-image" src="gt-figures/1002.png"/></figure><div class="snippet textual-snippet text-snippet paragraphWidth"></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <h3> An example of an example ...  </h3></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Here we see a simple example of an example method.It is annotated with a <code>&lt;gtExample></code> pragma to flag it as an example.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Like any test, it has a setup, which in this case creates a <code>game</code> object.We check some assertions, in this case perform no further operations, and then we return the object under test.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>This allows not only to carry out the tests, but also to inspect the result.  </p></div><figure class="snippet picture-snippet fullWidth"><img class="picture-snippet-image" src="gt-figures/1003.png"/></figure><div class="snippet textual-snippet text-snippet paragraphWidth"></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <h3> Composing examples  </h3></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Once we have an example, we can also use it as a setup for another example.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p><code>chooseMatchingPair</code> is another example method that starts with <code>fixedGame</code> as its setup.As in a conventional test, we can check some preconditions, perform one or more operations, and then check some postconditions.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>The difference, again, is that we return the object under test, so we can explore it.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>We can also reuse it as a setup for yet another example, in this case, <code>playToEnd</code>.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>If we switch to the     <i>Examples map    </i> view, we can see all the dependencies between the examples.  </p></div><figure class="snippet picture-snippet fullWidth"><img class="picture-snippet-image" src="gt-figures/1004.png"/></figure><div class="snippet textual-snippet text-snippet paragraphWidth"></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <h3> Why examples?  </h3></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>What are example methods good for?  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>As we have seen, examples make dependencies between tests explicit by reusing examples as setups for other examples, thus formaing a hierarchy of examples.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Best practice in test design supposedly should avoid dependencies between tests, but studies have shown that this is a lie.In reality tests without dependencies lead to a great deal of duplicated code, and cascading failures due to the same setups being repeated in numerous tests.By factoring out the commonalities as examples, the duplication is removed, and cascading failures are avoided.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>A further benefit is that examples can be used in live documentation, and, as we shall see, examples support an exploratory approach to test-driven development, that we call example-driven development, or EDD.  </p></div><figure class="snippet picture-snippet fullWidth"><img class="picture-snippet-image" src="gt-figures/1005.png"/></figure><div class="snippet textual-snippet text-snippet paragraphWidth"></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <h2> Modeling prices  </h2></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Let's work through an example where we want to model     <i>prices    </i> for goods, that may be     <i>discounted    </i> by fixed amounts, or percentages, or even combinations of different types of discounts.  </p></div><figure class="snippet picture-snippet fullWidth"><img class="picture-snippet-image" src="gt-figures/1006.png"/></figure><div class="snippet textual-snippet text-snippet paragraphWidth"></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <h3> Money classes  </h3></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>To simplify our task, we assume that we already have classes that model different amounts of money, such as 42 € or 10 USD.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>An amount of money is always in a     <i>currency    </i> such as euros or US dollars.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>A     <i>bag    </i> of money consists of amounts of mixed currencies.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>A     <i>zero    </i> amount of money doesn't have a currency.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>All these classes have a common abstract     <i>Money    </i> superclass for shared behavior.  </p></div><figure class="snippet picture-snippet fullWidth"><img class="picture-snippet-image" src="gt-figures/1007.png"/></figure><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Inspect the <code>42 euros</code> snippet.Inspect the <code>42 euros + 10 usd</code> snippet.Click on the GtTZeroMoney class.Click on the GtTMoney class.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <h3> Money examples  </h3></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>The money classes are heavily covered by examples, which are essentially unit tests that also return example objects.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>This means that a passing test is not just green, but also returns an object that can be explored, reused as a setup for another example, or embedded into live documentation.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Unlike tests, however, examples don't come “first” but they are extracted during the example-driven development process.  </p></div><figure class="snippet picture-snippet fullWidth"><img class="picture-snippet-image" src="gt-figures/1008.png"/></figure><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Run all the examples.Inspect the first example.Open the code bubbles to see how they are composed.Go to the Examples map to show all the dependencies.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <h2> Introducing a Concrete Price  </h2></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Just like we have a hierarchy of Money classes, we expect to end up with a hierarchy of Price objects, including an abstract root class, a concrete, fixed price, and several kinds of discounted prices.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Instead of designing this hierarchy up-front, we'll develop it incrementally, driven by examples.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>We'll start with an example of a concrete (as opposed to an abstract) Price object.  </p></div><figure class="snippet picture-snippet fullWidth"><img class="picture-snippet-image" src="gt-figures/1009.png"/></figure><div class="snippet textual-snippet text-snippet paragraphWidth"></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <h3> Start from an object  </h3></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Instead of starting by imagining and writing a test case as an example method, we start by creating an instance of the class we need.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>We first simply ask how we want to create our concrete instance of a price, and we write that code in a snippet.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Neither the class nor the constructor exist, so we create them as fixit operations.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Now we have a first concrete Price object!  </p></div><figure class="snippet picture-snippet fullWidth"><img class="picture-snippet-image" src="gt-figures/1010.png"/></figure><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Create the ConcretePrice class as a fixit.Give it the <code>EDDPrices</code> package, the <code>Model</code> tag, and a <code>money</code> slot.Create the accessors.Change the argument of <code>money:</code> to <code>aMoney</code>.Inspect the result.Inspect its <code>money</code> slot.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <h3> Create a factory method  </h3></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>We would  like to be able to create a price object by sending <code>asPrice</code> to a Money instance.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>We start by inspecting the Money instance.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>We prototype the code to create the Price instance.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>We try it out.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>And we extract the factory method.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>We change the method to be an extension from the <code>EDDPrices</code> package.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Now we can simply write <code>100 euros asPrice</code>.  </p></div><figure class="snippet picture-snippet fullWidth"><img class="picture-snippet-image" src="gt-figures/1011.png"/></figure><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Inspect the money.Open the playground.Code up <code>ConcretePrice new money: self; yourself</code>Inspect the result.Extract the <code>asPrice</code> method.Browse the new method.Change the category to <code>*EDDPrices</code>.Go back to the page and change the code to <code>100 euros asPrice</code> and inspect it.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <h3> Adding a view  </h3></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Our new Price object has only an ugly generic view, but its money slot has a nice  view we could reuse.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>We go to the <code>Meta</code> view of the Price object and add a new view method that forwards itself to the Details view of its <code>money</code> slot.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>A view is just a method that takes a view object as an argument, has a <code>&lt;gtView></code> pragma, and uses the view API to create the view we want, in this case a <code>forward</code> view.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>We set the title of the view to <code>Money</code>, the priority to 10 so it appears early in the list of views, the object we want to forward to is the money slot, and the view is its <code>gtDisplayFor:</code> view.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>The moment we commit the view code, the view becomes available.  </p></div><figure class="snippet picture-snippet fullWidth"><img class="picture-snippet-image" src="gt-figures/1012.png"/></figure><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Inspect the price object.Inspect the money slot and view the <code>Details</code> view code.Copy the method name.Go back to the Price inspector and switch to the <code>Meta</code> view.Add a forwarding <code>gtMoneyFor:</code> method.Show the new view.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <h3> Extracting an example  </h3></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>At this point it looks like we have a nice example for testing, so let's extract it as an example.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>We introduce a new class to hold our examples, and give the example a suitable name.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Note that the extracted example method has a <code>&lt;gtExample></code> pragma, and unlike a usual test method, it returns an instance.  </p></div><figure class="snippet picture-snippet fullWidth"><img class="picture-snippet-image" src="gt-figures/1013.png"/></figure><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Select all the code, right-click and     <i>Extract example    </i>Set the receiver to <code>PriceExamples</code> and the selector to <code>hundredEuros</code>.Choose <code>EDDPrices</code> as the package and <code>Examples</code> as the tag.Accept the refactoring.Inspect the result.Browse the code bubble.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <h3> Adding assertions  </h3></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>We now have an example, but we aren't testing anything yet.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Rather than directly adding tests to the example method, let's explore first.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>We expect that a price object should equal another price object with the same money value.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>We see that this fails.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Let's have a look at the <code>=</code> method. It's testing for object identity.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Now let's see what happens if we directly compare the <code>money</code> slots.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>This passes. We see that Money has implemented <code>=</code>, so we should do the same.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>We have the code we want right here, so let's extract it.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Now we can go back to the example and add a test.  </p></div><figure class="snippet picture-snippet fullWidth"><img class="picture-snippet-image" src="gt-figures/1014.png"/></figure><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Inspect the example and open the playground.Evaluate <code>other := 100 euros asPrice. self = other</code> and see it fails.Open the code bubble for <code>=</code> (alternatively search for <code>=</code> in the Meta view).Evaluate a new snippet <code>self money = other money</code> and see it passes.Browse the <code>=</code> method of money and see it has been overridden.Rewrite the <code>hundredEuros</code> example, adding the assertion.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <h2> EDD in a Nutshell  </h2></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>Summing up, instead of starting by writing a test, we first create a live object to explore.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>We prototype any behavior in the playground of the live object, and then extract methods that work.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>We create views that explain what is interesting about the object.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>We extract interesting instances as example methods of a dedicated examples class.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>We prototype tests in the playground of the live example, before adding them as assertions to an example.  </p></div><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>We iterate until we're done!  </p></div><figure class="snippet picture-snippet fullWidth"><img class="picture-snippet-image" src="gt-figures/1015.png"/></figure><div class="snippet textual-snippet text-snippet paragraphWidth">  <p>We leave room at the right of the slide for overviews of the points.  </p></div>

                <!-- page content end -->
            </main>
        </div>
    </div>

    <footer class="text-center py-5 le-footer">
        <p class="le-footer-credits">
            Powered by <a class="le-footer-link" href="https://lepiter.com">Lepiter</a> | <a class="le-footer-link" href="https://feenk.com/privacy">Privacy Policy</a>
        </p>
    </footer>

    <!-- scripts -->
    <script type="text/javascript" src="assets/vendor/jquery/js/jquery.js"></script>
    <script type="text/javascript" src="assets/vendor/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="assets/v1/src/js/datefns.min.js"></script>
    <script type="text/javascript" src="assets/v1/src/js/highlight.pack.js"></script>
    <script type="text/javascript" src="assets/v1/src/js/lepiter-common.js"></script>
    <script type="text/javascript" src="assets/v1/src/js/lepiter-snippets.js"></script>
    <script type="text/javascript" src="assets/v1/src/js/lepiter-time.js"></script>
</body>
</html>